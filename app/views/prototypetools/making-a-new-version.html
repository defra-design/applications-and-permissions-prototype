{% extends "layouts/main.html" %}

{% block content %}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">


        <h1 class="govuk-heading-xl">
            Prototype versioning instructions
        </h1>


        <details class="govuk-details">
            <summary class="govuk-details__summary">
                <span class="govuk-details__summary-text">
                    How this versioning works
                </span>
            </summary>
            <div class="govuk-details__text">

                <h2 class="govuk-heading-m">What is being copied and versioned</h2>
                <p>All version folders and files are in the 'app' folder.</p>

                <ul class="govuk-list--bullet govuk-body">
                    <li>Pages folder: &nbsp;&nbsp;views/latest/</li>
                    <li>Index page: &nbsp;&nbsp;views/latest/version-index (in views folder)</li>
                    <li>Layout file: &nbsp;&nbsp;layouts/latest/</li>
                    <li>Routes folder: &nbsp;&nbsp;routes/latest/</li>
                </ul>

                <h2 class="govuk-heading-m">What is being added to each versioned</h2>

                <ul class="govuk-list--bullet govuk-body">
                    <li>Routes version file: &nbsp;&nbsp;routes/latest/version (in routes folder)</li>
                    <li>Routes file: &nbsp;&nbsp;routes.js</li>
                    <li>CSS folder: &nbsp;&nbsp;assets/sass/</li>
                </ul>


                <h2 class="govuk-heading-m">Where versions live</h2>

                <p>The <a href="../index">main index page</a> shows a list of all the versions.</p>

                <p>Each version lives in a folder in the views folder.
                    <br>For example views/v1_0_0/</p>

                <p>Each version version has it's own index page.
                    <br>For example views/v1_0_0/version-index</p>


                <h2 class="govuk-heading-m">Benefits of archiving</h2>
                <ul class="govuk-list--bullet govuk-body">
                    <li>Developers can build from stable past versions</li>
                    <li>Assessments can review iteration history</li>
                </ul>
            </div>
        </details>



        <h2 class="govuk-heading-m">How to make a new version</h2>

        <ol class="govuk-body govuk-!-margin-bottom-9">
            <li>Windows: Open git bash/ finder<br>
                Mac: Open the folder you have installed the repo to in Finder</li>
            <li>Windows: Navigate to the repo e.g. cd Github/reponame/app<br>
                Mac: Right click on the app folder and click New Terminal at Folder</li>
            <li>Type in and enter bash versionUpdate.sh</li>
            <li>Enter a version number to archive the current<br>
                Numbers should increment suitably based on how minor or major the update.<br>
                For example 1.0.0</li>
            <li>Press enter</li>
            <li>Check the main index page for the update</li>
            <li>Replace the Placeholders with a summary of the changes for that version</li>
        </ol>





        <details class="govuk-details">
            <summary class="govuk-details__summary">
                <span class="govuk-details__summary-text">
                    Doing everything manually instead (not recommended)
                </span>
            </summary>
            <div class="govuk-details__text">

                <h2 class="govuk-heading-m">Manual instructions</h2>

                <p>Only do this if the automatic versioning fails.</p>

                <ol class="govuk-body govuk-!-margin-bottom-9">
                    <li>Choose a suitable version number in the format v1_2_3 to use in file/folder names
                        <br>Note this is a different format to the automatic process above
                        <br>v1_2_3 will be used in the below examples
                    </li>
                    <li>Navigate into the app folder in the prototype folder</li>
                    <li>Create a copy of the views/latest folder called views/v1_2_3</li>
                    <li>Create a copy of routes/latest folder called routes/v1_2_3.js</li>
                    <li>Create a copy of assets/sass/_latest.scss called assets/sass/_v1_2_3.scss - note this begins with an underscore</li>
                    <li>Create a copy of views/layouts/latest.html called views/layouts/v1_2_3.html</li>
                    <li>In routes/v1_2_3/version.js:
                        <br>Change const version = 'latest';
                        <br>to const version = 'v1_2_3';
                    </li>
                    <li>In assets/sass/_v1_2_3.scss
                        <br>Change .latest to .v1_2_3
                    </li>
                    <li>In views/layouts/v1_2_3.html
                        <br>Change {% set version = "latest" %} to {% set version = "v1_2_3" %}
                    </li>
                    <li>In the views/v1_2_3 folder, do a find and replace across all files in that folder and any subfolders:
                        <br>Change extends "layouts/latest.html"
                        <br>to extends "layouts/v1_2_3.html"
                    </li>
                    <li>In assets/sass/application.scss
                        <br>Add the line @import '_v1_2_3.scss';
                    </li>
                    <li>In routes.js
                        <br>Add the line require('./routes/v1_2_3.js');
                    </li>
                    <li>Update the index page of the prototype to show the new version.
                        <br>Include a summary of chnages and a links to the version index page.</li>
                </ol>
            </div>
        </details>




    </div>
</div>

{% endblock %}
